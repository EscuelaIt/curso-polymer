<!doctype html>
<!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html lang="es" itemscope itemtype="http://schema.org/Article">

<head>
  <meta charset="utf-8">

  <base href="../">

  <!-- Place this data between the <head> tags of your website -->
  <title>Data binding – Curso Polymer EscuelaIT</title>
  <meta name="description" content="Binding, two way, one way, notifys, readOnly. Autobinding templates. Ajax."
  />

  <!-- Schema.org markup for Google+ -->
  <meta itemprop="name" content="Data binding – Curso Polymer EscuelaIT">
  <meta itemprop="description" content="Binding, two way, one way, notifys, readOnly. Autobinding templates. Ajax.">
  <meta itemprop="image" content="http://escuela.it/wp-content/uploads/2015/11/polymer.jpg">

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@escuelait">
  <meta name="twitter:title" content="Data binding – Curso Polymer EscuelaIT">
  <meta name="twitter:description" content="Binding, two way, one way, notifys, readOnly. Autobinding templates. Ajax.">
  <meta name="twitter:creator" content="@recluising">
  <!-- Twitter summary card with large image must be at least 280x150px -->
  <meta name="twitter:image:src" content="http://escuela.it/wp-content/uploads/2015/11/polymer.jpg">

  <!-- Open Graph data -->
  <meta property="og:title" content="Data binding – Curso Polymer EscuelaIT" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://www.example.com/" />
  <meta property="og:image" content="http://escuela.it/wp-content/uploads/2015/11/polymer.jpg" />
  <meta property="og:description" content="Binding, two way, one way, notifys, readOnly. Autobinding templates. Ajax."
  />
  <meta property="og:site_name" content="Escuela IT" />
  <meta property="article:published_time" content="2015-12-15T20:00:00+01:00" />
  <meta property="article:modified_time" content="2015-12-15T20:00:00+01:00" />
  <meta property="article:section" content="Technology" />
  <meta property="article:tag" content="webcomponents, polymer" />
  <meta property="fb:admins" content="166109516807820" />

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="../reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../reveal.js/css/theme/night.css" id="theme">
  <link rel="stylesheet" href="../Reveal.js-Title-Footer/plugin/title-footer/title-footer.css">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? '../reveal.js/css/print/pdf.css' : '../reveal.js/css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );

  </script>

  <!--[if lt IE 9]>
<script src="../reveal.js/lib/js/html5shiv.js"></script>
<![endif]-->
</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section>
				<section style="text-align: left;" data-state="no-toc-progress">
					<h1 class="no-toc-progress">Data binding e interoperabilidad</h1>
					<h2>Curso Polymer Escuela IT</h2>
					<h3>Por <a href="http://twitter.com/recluising" target="_blank">Luis Recio</a> / <a href="http://twitter.com/recluising" target="_blank">@recluising</a></h3>
				</section>

				<section id="sobre-mi">
					<h1>Sobre mi</h1>
					<h2>Luis Recio</h2>
					<h4>Arquitecto Software en <a href="https://twitter.com/beeva_es" target="_blank">Beeva</a></h4>
					<p tagcloud>
						HTML5 JavaScript Polymer WebComponents
					</p>
				</section>
			</section>

			<section id="indice">
				<h1>Índice</h1>
				<ul>
					<li><a href="04-binding-interoperabilidad/#/data-binding">Data binding</a></li>
          <li><a href="04-binding-interoperabilidad/#/auto-binding-def">Auto binding</a></li>
  					<li><a href="04-binding-interoperabilidad/#/iron-ajax-index">iron-ajax</a></li>
				</ul>
			</section>


			<section id="data-binding">
				<h1>Data binding</h1>
				<blockquote>
					"Data binding binds a property or sub-property of a custom element (the host element) to a property or attribute of an element in its local DOM (the child or target element)." -<a href="https://www.polymer-project.org/1.0/docs/devguide/data-binding.html"> Polymer guides</a>
				</blockquote>
			</section>

			<section id="data-binding-types">

				<section id="data-binding-types-index" style="text-align: left;">
					<h1>Tipos de binding</h1>
					<ul>
						<li><a href="04-binding-interoperabilidad/#/types-annotations">Anotaciones</a></li>
						<li><a href="04-binding-interoperabilidad/#/types-text">Text content</a></li>
						<li><a href="04-binding-interoperabilidad/#/types-compound">Compuestas (Nuevo)</a></li>
						<li><a href="04-binding-interoperabilidad/#/types-sub-properties">Sub propiedades</a></li>
					</ul>
				</section>

				<section id="types-annotations" style="text-align: left;">
					<h2>Anotaciones</h2>
					<p>Las anotaciones son propiedades o subpropiedades encerradas entre "[[]]" o "{{}}", ligadas a un atributo de otro componente.</p>
					<ul style="text-align: left;">
						<li>
							<p><b>[[]]:</b> Representa data binding unidireccional</p>

						</li>
						<li>
							<p><b>{{}}:</b> Representa data binding bidireccional</p>

						</li>
					</ul>
					<pre>
						<code>
<car-element wheels-number=[[wheelsNumber]]></car-element>
						</code>
					</pre>
					<pre>
						<code>
<car-list cars={{cars}}></car-list>
						</code>
					</pre>
				</section>

				<section id="types-text" style="text-align: left;">
					<h2>Text content</h2>
					<p>La anotación ocupa todo el contenido (su 'textContent') de un elemento hijo</p>

					<pre>
						<code>
<dom-module id="welcomer-element">
	<style>
		.name: {
			color: red
		}
	</style>
	<template>
		Hello
		<!-- Text content annotation -->
		<span class="name">{{name}}</span>
	</template>

	<script>
		Polymer({
			is: 'welcomer-element',
			properties: {
				name: String
			}
		});
	</script>

</dom-module>
            </code>
          </pre>
        </section>
        <section id="types-text-2" style="text-align: left;">
          <h2>Text content</h2>
          <pre>
            <code>
<!-- Using the element -->
<welcomer-element name="Jake"></welcomer-element>
						</code>
					</pre>
          <p>Las anotaciones de texto son siempre unidireccionales, sin importar si usas '[[]]' o '{{}}'</p>
				</section>

        <section id="types-compound" style="text-align: left;">
          <h2>Binding compuesto</h2>
          <p>Composición de anotaciones con texto del entorno. Pueden usarse dentro del textContent o atributos.</p>
          <p>Es relativamente nuevo (version 1.2 de Polymer)</p>
          <pre>
            <code>
<!-- Using compound binding at attribute annotation -->
<a href="/profiles/{{nickName}}/details"> User info.</a>

<!-- Using into textContent -->
<p>Last connected {{lastConnectionTime}}. Nice to meet you again {{nickName}}</p>
            </code>
          </pre>
          <p style="text-align: left;">Hay dos consideraciones importantes</p>
          <ul style="text-align: left;">
            <li>El binding es unidireccional</li>
            <li>El contenido se re-evalua cada vez que una de las etiquetas involucradas cambia</li>
          </ul>
        </section>

        <section id="types-sub-properties" style="text-align: left;">
          <h2>Binding de subpropiedades</h2>
          <p>Se pueden hacer anotaciones de subpropiedades</p>
          <pre>
            <code>
<dom-module id="car-info">

  <template>
    <car-displayer driver="{{car.owner}}" wheels-number="{{car.wheels}}">
    </car-displayer>
  </template>

  <script>
    Polymer({
      is: 'car-info',
      properties: {
        car: {
          type: Object,
          value: function(){
            return {
              owner: 'Finn',
              wheels: 4
            };
          }
        }
      }
    });
  </script>

</dom-module>
            </code>
          </pre>
        </section>

        <section id="types-sub-properties-2" style="text-align: left;">
          <h2>Binding de subpropiedades</h2>
          <p>Tambien se pueden usar subpropiedades con binding compuesto.</p>
          <pre>
            <code>
  <template>
    <car-displayer driver="MR. {{car.owner}}">
    </car-displayer>
    <p>the car above has {{car.wheels}} wheels</p>
  </template>
            </code>
          </pre>
        </section>
      </section>

      <section id="data-binding-ways">
        <section id="data-binding-ways-index" style="text-align: left;">
          <h1>Data binding ways</h1>
          <ul>
						<li><a href="04-binding-interoperabilidad/#/data-binding-ways-2-ways-contract">Requisitos del data binding bidireccional</a></li>
						<li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways">5 tipos de direccionamiento</a></li>
						<li><a href="04-binding-interoperabilidad/#/data-binding-ways-notify-protocol">Protocolo</a></li>
						<li><a href="04-binding-interoperabilidad/#/data-binding-ways-native">Binding a elementos nativos</a></li>
					</ul>
        </section>
        <section id="data-binding-ways-2-ways-contract" style="text-align: left;">
          <h2>Requisitos del data binding bidireccional</h2>
          <p>El data binding de dos direcciones se da cuando se cumplen 3 condiciones que materializan el acuerdo entre padre e hijo de tener ese tipo de comunicación.</p>
          <p>Dado un atributo compartido por data binding bidireccional:</p>
          <ul>
            <li>El elemento padre debe usar {{}} (no [[]]).</li>
            <li>El elemento hijo debe tener en la definición de su atributo la propiedad 'notify = true'.</li>
            <li>El elemento hijo no debe tener en la definición de su atributo la propiedad 'readOnly = true'.</li>
          </ul>
          <p>Dadas estas condiciones, el data binding es bidireccional. Veremos un ejemplo más adelante.</p>
        </section>
        <section id="data-binding-ways-the-5-ways" style="text-align: left;">
          <h2>5 tipos de direccionamiento</h2>
          <p>Existen 5 formas de comunicar dos polymer entre sí usando binding en un contexto padre hijo</p>
          <ul>
            <li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways-1">Two Way</a></li>
            <li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways-2">Padre a hijo (One Way)</a></li>
            <li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways-3">Padre a hijo modo 2 (One way)</a></li>
            <li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways-4">Hijo a Padre (One Way)</a></li>
            <li><a href="04-binding-interoperabilidad/#/data-binding-ways-the-5-ways-5">MUTE</a></li>
          </ul>
        </section>
        <section id="data-binding-ways-the-5-ways-1" style="text-align: left;">
          <h2>Two Way</h2>
          <p>Han de cumplirse las 3 premisas que vimos anteriormente.</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'soldiers-list',
    properties: {
      experience: {
        type: String,
        notify: true
      }
    }
  });
</script>
...

<soldiers-list experience="{{armyExp}}"></soldiers-list>
            </code>
          </pre>
        </section>
        <section id="data-binding-ways-the-5-ways-2" style="text-align: left;">
          <h2>Padre a hijo (One Way)</h2>
          <p>Es básicamente como el ejemplo anterior. La diferencia es que la propiedad notify es false.</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'soldiers-list',
    properties: {
      experience: {
        type: String
        // NO NOTIFY => notify: false (By default)
      }
    }
  });
</script>
...

<soldiers-list experience="{{armyExp}}"></soldiers-list>
            </code>
          </pre>
        </section>
        <section id="data-binding-ways-the-5-ways-3" style="text-align: left;">
          <h2>Padre a hijo modo 2(One Way)</h2>
          <p>Esta vez no el que se ponga notify o no es irrelevante, ya que al usar [[]] estamos especificando el binding unidireccional declarativamente.</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'soldiers-list',
    properties: {
      experience: {
        type: String
      }
    }
  });
</script>
...

<soldiers-list experience="[[armyExp]]"></soldiers-list>
            </code>
          </pre>
        </section>
        <section id="data-binding-ways-the-5-ways-4" style="text-align: left;">
          <h2>Hijo a padre (One Way)</h2>
          <p>Es un caso extraño, pero puede darse y ser de utilidad. Prestemos atención a la propiedad 'readOnly: true'</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'soldiers-list',
    properties: {
      experience: {
        type: String
        notify: true,
        readOnly: true
      }
    }
  });
</script>
...

<soldiers-list experience="{{armyExp}}"></soldiers-list>
            </code>
          </pre>
        </section>
        <section id="data-binding-ways-the-5-ways-5" style="text-align: left;">
          <h2>MUTE</h2>
          <p>Es un caso posible pero inutil en el que no hay comunicación</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'soldiers-list',
    properties: {
      experience: {
        type: String,
        notify: true,
        readOnly: true // readOnly => Hijo ignora cambios
      }
    }
  });
</script>
...
<!-- [[]] => Padre ignora cambios -->
<soldiers-list experience="[[armyExp]]"></soldiers-list>
            </code>
          </pre>
        </section>
        <section id="data-binding-ways-notify-protocol" style="text-align: left;">
          <h2>Protocolo</h2>
          <p>Existe un protocolo de comunicación de cambios de hijo a padre que se activa cuando el hijo usa 'notify:true' en una propiedad.</p>
          <p>Imaginemos el siguiente escenario:</p>
          <pre>
            <code>
<script>
  Polymer({
    is: 'notify-example',
    properties: {
      propertySample: {
        type: String,
        notify: true
      }
    }
  });
</script>
...
<notify-example></notify-example>
            </code>
          </pre>
          <p>Cambios en 'propertySample' => evento 'property-sample-changed' lanzado con el nuevo valor como detalle</p>
        </section>
        <section id="data-binding-ways-native" style="text-align: left;">
          <h2>Binding a elementos nativos</h2>
          <p>Elementos nativos no siguen protocolo "propertyChanged"</p>
          <p>Podemos enlazarnos con atributos de elementos nativos a través de un evento del elemento nativo.</p>

          <pre>
            <code>
<dom-module id="binding-native-example">
  <template>
    <native-element target-prop="{{hostProp::target-change-event}}"></native-element>
  </template>
  <script>
    Polymer({
      is: 'binding-native-example',
      properties: {
        hostProp: {
          type: String
        }
      }
    });
  </script>
</dom-module>
            </code>
          </pre>
        </section>
      </section>
      <section id="auto-binding" style="text-align: left;">
        <section id="auto-binding-def" style="text-align: left;">
          <h1>Auto binding template</h1>
          <ul>
            <li><a href="04-binding-interoperabilidad/#/auto-binding-explanation">dom-bind</a></li>
            <li><a href="04-binding-interoperabilidad/#/auto-binding-where">Donde usar dom-bind</a></li>
            <li><a href="04-binding-interoperabilidad/#/auto-binding-examples">Ejemplos de uso</a></li>
          </ul>
        </section>
        <section id="auto-binding-explanation" style="text-align: left;">
          <h2>dom-bind</h2>
          <p>Para usar data binding debes estar en el contexto de un template de un elemento Polymer, o en un dom-bind.</p>
          <pre>
            <code>
<template id="templateDomBind" is="dom-bind">

  <one-polymer someProp="{{info}}"></one-polymer>

  <another-polymer myProp="{{info}}"></another-polymer>

</template>
<script>
  var templateDomBind = document.querySelector('#templateDomBind');

  templateDomBind.addEventListener('dom-change', function() {
    // auto-binding template is ready.
  });
</script>
            </code>
          </pre>
          <p>Escuchando el evento 'dom-change' en un template 'dom-bind' podemos saber cuando este está listo</p>
        </section>
        <section id="auto-binding-where" style="text-align: left;">
          <h2>Donde usar dom-bind</h2>
          <p>Ejemplos de nuestros Polymer (demos)</p>
          <p>Ámbitos donde no necesitas nada de Polymer mas que el binding</p>
        </section>
        <section id="auto-binding-examples" style="text-align: left;">
          <h2>Ejemplos de uso</h2>
          <h3>Demo del propio iron-ajax</h3>
          <h3>Polymer Starter Kit</h3>
        </section>
        <section id="auto-binding-examples-1" style="text-align: left;">
          <p>En iron-ajax se usa un dom-bind para establecer un contexto general 'app' </p>
          <pre>
            <code>
<template is="dom-bind" id="app">
  <iron-ajax auto
      url="https://www.googleapis.com/youtube/v3/search"
      params='{"part":"snippet", "q":"polymer", "key": "AIzaSyAuecFZ9xJXbGDkQYWBmYrtzOGJD-iDIgI", "type": "video"}'
      handle-as="json"
      last-response="{{ajaxResponse}}"></iron-ajax>

    <template is="dom-repeat" items="[[ajaxResponse.items]]">
      <div class="horizontal-section">
        <h2><a href="[[url(item.id.videoId)]]" target="_blank">[[item.snippet.title]]</a></h2>
        <iron-image src="[[item.snippet.thumbnails.high.url]]" width="256" height="256" sizing="cover" preload fade></iron-image>
        <p>[[item.snippet.description]]</p>
      </div>
    </template>
</template>
...
<script>
  var app = document.querySelector('#app');
  app.url = function (videoId) {
    return 'https://www.youtube.com/watch?v=' + videoId;
  };
</script>
            </code>
          </pre>
          <p>Code: <a href="https://github.com/PolymerElements/iron-ajax/blob/master/demo/index.html">iron-ajax demo</a></p>
        </section>
        <section id="auto-binding-examples-2" style="text-align: left;">
          <p>Polymer Starter Kit organiza todos sus componentes en un dom-bind padre al que también identifica como app</p>
          <pre>
            <code>
...
<!-- at index.html-->
<body unresolved class="fullbleed layout vertical">
  <span id="browser-sync-binding"></span>
  <template is="dom-bind" id="app">
    <!-- All components are here -->
  </template>
</body>
...
<script>
// at app.js
var app = document.querySelector('#app');

app.displayInstalledToast = function() {
  ...
};
...
app.addEventListener('dom-change', function() {
  console.log('Our app is ready to rock!');
});
...
</script>
            </code>
          </pre>
        </section>
      </section>
      <section id="iron-ajax" style="text-align: left;">
        <section id="iron-ajax-index" style="text-align: left;">
          <h1>iron-ajax</h1>
          <ul>
						<li><a href="04-binding-interoperabilidad/#/iron-ajax-def">El elemento iron-ajax</a></li>
            <li><a href="04-binding-interoperabilidad/#/iron-ajax-api">API de iron-ajax</a></li>
            <li><a href="04-binding-interoperabilidad/#/iron-ajax-usage">El elemento iron-ajax</a></li>
					</ul>
        </section>
        <section id="iron-ajax-def" style="text-align: left;">
          <h2>El elemento iron-ajax</h2>
          <p>iron-ajax es un iron element del catáloco de Polymer que encapsula la lógica para realizar llamadas AJAX</p>
          <pre>
            <code>
<iron-ajax url="SomeUrl" handle-as="json"></iron-ajax>
            </code>
          </pre>
        </section>
        <section id="iron-ajax-api" style="text-align: left;">
          <h2>Algunas propiedades a tener en cuenta</h2>
          <ul>
            <li><b>auto</b>: iron-ajaz lanzará la request tan pronto como esté listo.</li>
            <li><b>url</b>: URL de la petición</li>
            <li><b>body</b>: contenido de la petición</li>
            <li><b>handleAs</b>: tipo de datos que vendrán en la respuesta</li>
            <li><b>lastError, lastRequest, lastResponse</b>: los últimos respctivos valores</li>
            <li><b>params</b>: parámetros a incluir en la URL</li>
          </ul>
        </section>
        <section id="iron-ajax-api-2" style="text-align: left;">
          <h2>Métodos</h2>
          <b>generateRequest()</b>: lanza la request(se lanza automáticamente si auto está activado)
        </section>
        <section id="iron-ajax-usage" style="text-align: left;">
          <h2>Usos de iron-ajax</h2>
          <p>Podemos usar iron-ajax como fuente de datos al conectarnos a APIs externas. Podemos bindear la respuesta del iron-ajax a otros elementos para obtener información, visualizarla, transformarla...</p>
        </section>
      </section>
		</div>
	</div>

	<script src="../reveal.js/lib/js/head.min.js"></script>
	<script src="../reveal.js/js/reveal.js"></script>

	<script>
		(function(document, Reveal) {
			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom
				menu: {
					markers: true,
					themes: false,
					transitions: false,
					custom: [{
						title: 'Bookmarks',
						icon: '<i class="fa fa-bookmark">',
						src: './links.html'
					}, ]
				},

				// Optional reveal.js plugins
				dependencies: [{
					src: '../reveal.js/lib/js/classList.js',
					async: true,
					condition: function() {
						return !document.body.classList;
					}
				}, {
					src: '../reveal.js/plugin/markdown/marked.js',
					async: true,
					condition: function() {
						return !!document.querySelector('[data-markdown]');
					}
				}, {
					src: '../reveal.js/plugin/markdown/markdown.js',
					async: true,
					condition: function() {
						return !!document.querySelector('[data-markdown]');
					}
				}, {
					src: '../reveal.js/plugin/highlight/highlight.js',
					async: true,
					callback: function() {
						hljs.initHighlightingOnLoad();
					}
				}, {
					src: '../reveal.js/plugin/zoom-js/zoom.js',
					async: true
				}, {
					src: '../reveal.js/plugin/notes/notes.js',
					async: true
				}, {
					src: '../reveal.js-menu/menu.js',
					async: true
				}, {
					src: '../reveal.js-tagcloud-plugin/tagcloud/tagcloud.js',
					async: true
				}, {
					src: '../Reveal.js-Title-Footer/plugin/title-footer/title-footer.js',
					async: true,
					callback: function() {
						title_footer.initialize();
					}
				}]
			});
		})(document, Reveal)
	</script>
</body>
</html>
